#!/usr/bin/env php
<?php
/**
 * 服务启动管理
 * @author donknap
 * @date 18-7-18 下午6:35
 */
$dir = dirname(__DIR__, 4);
if (!file_exists($dir . '/config/define.php')) {
	if (empty($argv[1]) || strpos($argv[1], '--app-path') === false) {
		echo '请通过参数--app-path指定app目录';
	}
	$dir = explode('=', $argv[1], 2)[1];
}

require_once $dir . '/config/define.php';
$loader = require_once BASE_PATH . '/vendor/autoload.php';

$_SERVER['argv'] = array_merge([
		array_shift($argv),
		array_shift($argv) . ':' . array_shift($argv)
	], $argv);

$app = new \W7\App();
$app->runConsole();

